<% title("Leads Database") %>
<div class='row' style='border-bottom: 3px solid #555555;'>
  <div class='col-md-8'>
    <h3>Leads Database</h3>
  </div>
  <div class='col-md-4 text-right' style='top:25px;'>
    <%= link_to 'Create Lead', new_lead_path %> | <%= link_to 'Bulk Import', '#', onclick: "$('#file-uploader').toggle()" %>
  </div>
</div>
<div id='file-uploader' class='row' style='display:none;background: #EDE36A;padding: 5px'>
    <div class='col-md-6'>
      <p style='padding: 10px'>
        We know how important importing contacts is to your business. That’s why we’ve made it quick and easy to import contacts into Agent Formula's CRM, so you can spend time growing your business—not entering contact information.
      </p>
    </div>
    <div class='col-md-6 text-right' style='padding:15px'>
      <%= direct_upload_form_for @uploader do |f| %>
      <div class='form-group'>
        <label for='file' class='sr-only'></label>
        <%= f.file_field :csv, class: 'form-control' %>
      </div>
      <div class='form-group'>
        <%= f.submit "Upload CSV", class: 'btn btn-info' %>
      </div>
      <% end %>
    </div>
</div>

<div class="text-center">
  <p><%= page_entries_info @leads %></p>
  <%= paginate @leads %>
</div>

<%= form_tag admin_leads_path, method: 'get', html: {role: "form"} do %>
<p>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search", :name => nil, class: "btn btn-sm btn-primary" %>
  <%= link_to "All", admin_leads_path, {class: "btn btn-sm btn-link"} %>
</p>
<% end %>

<table class='table table-bordered table-striped' style='margin-top: 10px;'>
  <thead>
    <tr>
      <th>Status</th>
      <th>name</th>
      <th>Email</th>
      <th>Kind</th>
      <th>Source</th>
      <th>Category</th>
      <th>Company</th>
      <th>Rating</th>
      <th>Access</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @leads.each do |lead| %>
      <tr>
        <td><%= lead.status %></td>
        <td><%= lead.first_name %> <%= lead.last_name %></td>
        <td><%= lead.email %></td>
        <td><%= lead.kind %></td>
        <td><%= lead.source %></td>
        <td><%= lead.category %></td>
        <td><%= lead.company %></td>
        <td><%= lead.rating %></td>
        <td><%= lead.access %></td>
        <td><%= link_to 'Show', lead %></td>
        <td><%= link_to 'Edit', edit_lead_path(lead) %></td>
        <td><%= link_to 'Destroy', lead, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>